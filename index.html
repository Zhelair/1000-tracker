<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1000 Tracker</title>
  <link rel="stylesheet" href="./styles.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="./supabase.js"></script>
  <script defer src="./app.js"></script>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="logo">1000</div>
        <div>
          <div class="h1">–°—á—ë—Ç—á–∏–∫ –¥–ª—è ¬´–¢—ã—Å—è—á–∏¬ª</div>
          <div class="sub">–ö–æ–º–Ω–∞—Ç–∞ ‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞ ‚Ä¢ –°—á—ë—Ç ‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è ‚Ä¢ –ì—Ä–∞—Ñ–∏–∫</div>
        </div>
      </div>
      <div class="topRight">
        <div class="badge" id="roomBadge">‚Äî</div>
        <div class="pill" id="pillStatus">offline</div>
      </div>
    </header>

    <!-- HOME -->
    <main id="viewHome" class="stack">
      <section class="card hero">
        <div class="heroText">
          <h2>–ë–µ–∑ —Å–ø–æ—Ä–æ–≤. –ü—Ä–æ—Å—Ç–æ —Å—á—ë—Ç.</h2>
          <p class="muted">–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É, –¥–æ–≥–æ–≤–æ—Ä–∏—Ç–µ—Å—å –æ –ø—Ä–∞–≤–∏–ª–∞—Ö –∏ –∏–≥—Ä–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏.</p>
        </div>

        <div class="row">
          <label class="field">
            <span>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã</span>
            <input id="roomCode" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: table1" autocomplete="off" />
          </label>

          <label class="field">
            <span>–í—ã ‚Äî –∏–≥—Ä–æ–∫</span>
            <select id="playerSelect">
              <option value="player_1">–ë–∞–Ω–∫–∏—Ä</option>
              <option value="player_2">–†–∏—Å–∫–æ–≤—ã–π</option>
              <option value="player_3">–ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π</option>
            </select>
          </label>
        </div>

        <div class="row">
          <button class="btn primary" id="btnJoin">–í–æ–π—Ç–∏ / –°–æ–∑–¥–∞—Ç—å</button>
          <button class="btn" id="btnCopy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        </div>

        <div class="note muted">
          –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ 3 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö. –ö–∞–∂–¥—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–µ–≥–æ –∏–≥—Ä–æ–∫–∞. –ó–∞—Ç–µ–º –≤ ¬´–ü—Ä–∞–≤–∏–ª–∞—Ö¬ª –Ω–∞–∂–º–∏—Ç–µ ¬´–°–æ–≥–ª–∞—Å–µ–Ω ‚úÖ¬ª.
        </div>
      </section>

      <section class="card">
        <div class="cardHead">
          <h3>–ù–µ–¥–∞–≤–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã</h3>
          <button class="btn tiny" id="btnClearRecent">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        <div id="recentRooms" class="recent"></div>
        <div class="muted small" style="margin-top:10px;">–°–ø–∏—Å–æ–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.</div>
      </section>
    </main>

    <!-- APP -->
    <main id="viewApp" class="stack" style="display:none;">
      <nav class="tabs" role="tablist" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
        <button class="tab active" data-tab="rules" role="tab">–ü—Ä–∞–≤–∏–ª–∞</button>
        <button class="tab" data-tab="score" role="tab">–°—á—ë—Ç</button>
        <button class="tab" data-tab="history" role="tab">–ò—Å—Ç–æ—Ä–∏—è</button>
        <button class="tab" data-tab="chart" role="tab">–ì—Ä–∞—Ñ–∏–∫</button>
      </nav>

      <!-- RULES -->
      <section class="panel active" id="tab-rules" role="tabpanel">
        <div class="grid2">
          <section class="card">
            <div class="cardHead">
              <h3>–ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º–Ω–∞—Ç—ã</h3>
              <div class="muted" id="roomMeta">‚Äî</div>
            </div>

            <div class="rules">
              <div class="rule">
                <div>
                  <div class="rTitle">–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ</div>
                  <div class="muted">–∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å ¬´–æ—á–∫–∏¬ª —É –Ω–µ-–∑–∞–∫–∞–∑—á–∏–∫–æ–≤</div>
                </div>
                <select id="ruleRounding">
                  <option value="none">–ë–µ–∑ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è</option>
                  <option value="to5">–î–æ 5</option>
                  <option value="to10_5up">–î–æ 10 (5 –≤–≤–µ—Ä—Ö)</option>
                </select>
              </div>

              <div class="rule">
                <div>
                  <div class="rTitle">–°–∞–º–æ—Å–≤–∞–ª 555</div>
                  <div class="muted">–µ—Å–ª–∏ —Ä–æ–≤–Ω–æ 555 ‚Üí 0</div>
                </div>
                <input type="checkbox" id="rule555" />
              </div>

              <div class="rule">
                <div>
                  <div class="rTitle">–ë–æ–ª—Ç—ã</div>
                  <div class="muted">0 –≤–∑—è—Ç–æ–∫ = –±–æ–ª—Ç; 3 –±–æ–ª—Ç–∞ ‚Üí —à—Ç—Ä–∞—Ñ</div>
                </div>
                <input type="checkbox" id="ruleBolts" />
              </div>

              <div class="rule">
                <div>
                  <div class="rTitle">–®—Ç—Ä–∞—Ñ –∑–∞ 3 –±–æ–ª—Ç–∞</div>
                  <div class="muted">–æ–±—ã—á–Ω–æ 120</div>
                </div>
                <input type="number" id="ruleBoltsPenalty" min="0" step="5" value="120" />
              </div>
            </div>

            <div class="row">
              <button id="btnSaveRules" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              <button id="btnAgree" class="btn primary">–°–æ–≥–ª–∞—Å–µ–Ω ‚úÖ</button>
              <button id="btnSources" class="btn ghost">–ò—Å—Ç–æ—á–Ω–∏–∫–∏</button>
              <button id="btnShare" class="btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>

            <div class="note">
              <div class="muted">
                <b>MVP –ª–æ–≥–∏–∫–∞:</b> –∑–∞–∫–∞–∑—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç <b>+–∑–∞–∫–∞–∑</b> –µ—Å–ª–∏ —Å—ã–≥—Ä–∞–ª, –∏–Ω–∞—á–µ <b>‚àí–∑–∞–∫–∞–∑</b>.
                –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç –≤–≤–µ–¥—ë–Ω–Ω—ã–µ ¬´–æ—á–∫–∏¬ª (—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ).
              </div>
              <div class="muted" style="margin-top:8px;">–°–æ–≥–ª–∞—Å–∏–µ: <span id="agreeStatus">‚Äî</span></div>
              <div class="muted" style="margin-top:6px;">–°—Ç–∞—Ç—É—Å: <span id="lockStatus">‚Äî</span></div>
            </div>
          </section>

          <section class="card">
            <div class="cardHead">
              <h3>–®–ø–∞—Ä–≥–∞–ª–∫–∞ (–∫–ª–∞—Å—Å–∏–∫–∞)</h3>
              <div class="muted">–∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É</div>
            </div>

            <details class="acc" open>
              <summary>–¶–µ–ª—å</summary>
              <div class="accBody">–ù–∞–±—Ä–∞—Ç—å <b>1000</b> –æ—á–∫–æ–≤ –±—ã—Å—Ç—Ä–µ–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.</div>
            </details>

            <details class="acc">
              <summary>–û—á–∫–∏ –∫–∞—Ä—Ç</summary>
              <div class="accBody">
                –¢—É–∑ ‚Äî 11 ‚Ä¢ 10 ‚Äî 10 ‚Ä¢ –ö–æ—Ä–æ–ª—å ‚Äî 4 ‚Ä¢ –î–∞–º–∞ ‚Äî 3 ‚Ä¢ –í–∞–ª–µ—Ç ‚Äî 2 ‚Ä¢ –î–µ–≤—è—Ç–∫–∞ –∏ –Ω–∏–∂–µ ‚Äî 0.<br/>
                –ß–∞—Å—Ç–æ ¬´–∫–∞—Ä—Ç–æ—á–Ω—ã—Ö¬ª –æ—á–∫–æ–≤ –∑–∞ –∫–æ–Ω: 120 (–±–µ–∑ –º–∞—Ä—å—è–∂–µ–π).
              </div>
            </details>

            <details class="acc">
              <summary>–ú–∞—Ä—å—è–∂–∏</summary>
              <div class="accBody">
                –ö–æ—Ä–æ–ª—å+–î–∞–º–∞ –æ–¥–Ω–æ–π –º–∞—Å—Ç–∏: ‚ô•100 ‚Ä¢ ‚ô¶80 ‚Ä¢ ‚ô£60 ‚Ä¢ ‚ô†40.
              </div>
            </details>

            <details class="acc">
              <summary>–ó–∞–∫–∞–∑</summary>
              <div class="accBody">
                –í—ã–∏–≥—Ä–∞–ª —Ç–æ—Ä–≥–æ–≤–ª—é ‚Üí –æ–±—ä—è–≤–∏–ª –∑–∞–∫–∞–∑. –°—ã–≥—Ä–∞–ª ‚Üí +–∑–∞–∫–∞–∑. –ù–µ —Å—ã–≥—Ä–∞–ª ‚Üí ‚àí–∑–∞–∫–∞–∑.
              </div>
            </details>

            <details class="acc">
              <summary>–ë–æ–ª—Ç—ã / 555</summary>
              <div class="accBody">
                –ë–æ–ª—Ç = 0 –≤–∑—è—Ç–æ–∫ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ). –°–∞–º–æ—Å–≤–∞–ª 555 = —Å–±—Ä–æ—Å –≤ 0 (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ).
              </div>
            </details>

            <div class="note muted">
              –•–æ—Ç–∏—Ç–µ ‚Äú–±–æ—á–∫—É/880‚Äù, ‚Äú—Ä–æ—Å–ø–∏—Å—å‚Äù, ‚Äú–∑–æ–ª–æ—Ç–æ–π –∫–æ–Ω‚Äù ‚Äî –¥–æ–±–∞–≤–∏–º –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞.
            </div>
          </section>
        </div>
      </section>

      <!-- SCORE -->
      <section class="panel" id="tab-score" role="tabpanel">
        <section class="card">
          <div class="cardHead">
            <h3>–°—á—ë—Ç</h3>
            <div class="muted">–¥–æ 1000</div>
          </div>

          <div class="scoreGrid">
            <div class="scoreBox">
              <div class="muted">–ë–∞–Ω–∫–∏—Ä</div>
              <div class="scoreNum" id="s1">0</div>
              <div class="muted small">–±–æ–ª—Ç—ã: <span id="b1">0</span></div>
            </div>
            <div class="scoreBox">
              <div class="muted">–†–∏—Å–∫–æ–≤—ã–π</div>
              <div class="scoreNum" id="s2">0</div>
              <div class="muted small">–±–æ–ª—Ç—ã: <span id="b2">0</span></div>
            </div>
            <div class="scoreBox">
              <div class="muted">–ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π</div>
              <div class="scoreNum" id="s3">0</div>
              <div class="muted small">–±–æ–ª—Ç—ã: <span id="b3">0</span></div>
            </div>
          </div>

          <hr/>

          <h4>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω</h4>
          <div class="row">
            <label class="field">
              <span>–ó–∞–∫–∞–∑—á–∏–∫</span>
              <select id="bidder">
                <option value="player_1">–ë–∞–Ω–∫–∏—Ä</option>
                <option value="player_2">–†–∏—Å–∫–æ–≤—ã–π</option>
                <option value="player_3">–ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π</option>
              </select>
            </label>

            <label class="field">
              <span>–ó–∞–∫–∞–∑ (–∫—Ä–∞—Ç–Ω–æ 5)</span>
              <input id="bid" type="number" min="80" step="5" value="100" />
            </label>

            <label class="field">
              <span>–†–µ–∑—É–ª—å—Ç–∞—Ç</span>
              <select id="made">
                <option value="made">–°—ã–≥—Ä–∞–ª</option>
                <option value="failed">–ù–µ —Å—ã–≥—Ä–∞–ª</option>
              </select>
            </label>
          </div>

          <div class="row">
            <label class="field">
              <span>–û—á–∫–∏: –ë–∞–Ω–∫–∏—Ä</span>
              <input id="p1" type="number" min="-500" step="1" value="0" />
            </label>
            <label class="field">
              <span>–û—á–∫–∏: –†–∏—Å–∫–æ–≤—ã–π</span>
              <input id="p2" type="number" min="-500" step="1" value="0" />
            </label>
            <label class="field">
              <span>–û—á–∫–∏: –ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π</span>
              <input id="p3" type="number" min="-500" step="1" value="0" />
            </label>
          </div>

          <div class="row">
            <label class="check"><input id="bolt1" type="checkbox" /> –ë–æ–ª—Ç –ë–∞–Ω–∫–∏—Ä (0 –≤–∑—è—Ç–æ–∫)</label>
            <label class="check"><input id="bolt2" type="checkbox" /> –ë–æ–ª—Ç –†–∏—Å–∫–æ–≤—ã–π (0 –≤–∑—è—Ç–æ–∫)</label>
            <label class="check"><input id="bolt3" type="checkbox" /> –ë–æ–ª—Ç –ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π (0 –≤–∑—è—Ç–æ–∫)</label>
          </div>

          <div class="row">
            <button id="btnAddRound" class="btn primary">–ó–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω</button>
            <button id="btnUndo" class="btn danger">–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–Ω</button>
          </div>

          <div class="note muted">
            –ï—Å–ª–∏ —Å–ø–æ—Ä–∏—Ç–µ ‚Äî –≤–∫–ª–∞–¥–∫–∞ <b>–ò—Å—Ç–æ—Ä–∏—è</b> (—Ç–∞–º –≤—Å—ë –ø–æ —à–∞–≥–∞–º).
          </div>
        </section>
      </section>

      <!-- HISTORY -->
      <section class="panel" id="tab-history" role="tabpanel">
        <section class="card">
          <div class="cardHead">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω–æ–≤</h3>
            <div class="muted">–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50</div>
          </div>
          <div id="history" class="history"></div>
        </section>
      </section>

      <!-- CHART -->
      <section class="panel" id="tab-chart" role="tabpanel">
        <section class="card">
          <div class="cardHead">
            <h3>–ì—Ä–∞—Ñ–∏–∫ —Å—á—ë—Ç–∞</h3>
            <div class="muted">–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω–∞</div>
          </div>
          <div class="chartWrap">
            <svg id="chart" viewBox="0 0 900 320" preserveAspectRatio="none"></svg>
          </div>
          <div class="legend">
            <span class="li"><span class="dot d1"></span> –ë–∞–Ω–∫–∏—Ä</span>
            <span class="li"><span class="dot d2"></span> –†–∏—Å–∫–æ–≤—ã–π</span>
            <span class="li"><span class="dot d3"></span> –ù–µ–≤–æ–∑–º—É—Ç–∏–º—ã–π</span>
          </div>
          <div class="muted small" style="margin-top:10px;">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–ª–∏–∫–∞–π—Ç–µ ‚Äú–ò—Å—Ç–æ—Ä–∏—è‚Äù –µ—Å–ª–∏ —Å–ø–æ—Ä–∏—Ç–µ, ‚Äú–ì—Ä–∞—Ñ–∏–∫‚Äù –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –¥–∏–Ω–∞–º–∏–∫—É.</div>
        </section>
      </section>
    </main>

    <!-- SOURCES MODAL -->
    <div class="modal" id="modalSources" aria-hidden="true">
      <div class="modalCard">
        <div class="modalHead">
          <div class="modalTitle">–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–∞–≤–∏–ª</div>
          <button class="btn tiny" id="btnCloseSources">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div class="muted">
          –≠—Ç–æ —Å—Å—ã–ª–∫–∏ ‚Äú–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏‚Äù, —á—Ç–æ–±—ã —Å–ø–æ—Ä–∏—Ç—å –Ω–µ —Å –ø–∞–ø–æ–π/–¥—è–¥–µ–π, –∞ —Å –±—Ä–∞—É–∑–µ—Ä–æ–º üôÇ
        </div>
        <div class="linkList">
          <a class="link" id="srcMail" target="_blank" rel="noopener noreferrer">Mail.ru (—Ä—É—Å—Å–∫–∏–π –æ–±–∑–æ—Ä)</a>
          <a class="link" id="srcPagat" target="_blank" rel="noopener noreferrer">Pagat (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)</a>
          <a class="link" id="srcWiki" target="_blank" rel="noopener noreferrer">Wikipedia (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞)</a>
        </div>
      </div>
      <div class="modalBackdrop" id="modalBackdrop"></div>
    </div>

    <footer class="foot muted">1000 Tracker ‚Ä¢ –Ω–∏–∫–∞–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ ‚Ä¢ —Ç–æ–ª—å–∫–æ —Å—á—ë—Ç</footer>
  </div>
</body>
</html>
